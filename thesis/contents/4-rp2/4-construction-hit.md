## Construction as a Higher Inductive Type

During our study of homotopy types implemented in homotopy type theory, it was noticed how there are different ways of building cells.

We begin by highlighting the fact that in homotopy type theory we use the word homotopy in two different senses.
The first, like the one that appears in the definition of a pushout, matches the classical notion of "a path between functions".
On the other hand, following the analogy between higher identity types and homotopy types, we can consider the terms of a types as points, their equalities as paths, and the equalities between those as homotopies.
To distinguish them, we will call the first kind *function homotopies* and the second kind *path homotopies*.

In the literature of homotopy type theory, cell complexes are mainly built using pushouts.
The function homotopy in the definition of the pushout plays the role of the higher cell.

In a few cases, the other notion of homotopy is used.
For example, the higher inductive type definitions of the higher spheres are built like this: we provide a $0$-cell and an $n$-cell, in the form of a higher path.

With this in mind, it was hypothesized that path homotopies could be used in other spaces.
In particular, the idea appeared when trying to see how to obtain the fundamental group of the real projective plane.
If one distills the (topological) idea of what a projective plane is, it can be seen as a $1$-cell, together with a $2$-cell that reverses it.
We can express this as a higher inductive type:
\begin{align*}
X_0 &: X\\
X_1 &: X_0 = X_0\\
X_2 &: X_1 = X_1^{-1}
\end{align*}

This construction is conceptually simpler than the one with pushouts.
But not only that: it also allows an easy construction of its fundamental group.

We recall the fundamental group is defined as the $0$-truncation of the path space over the base point ($\norm{X_0 = X_0}_0$).

\begin{theorem}
The fundamental group of the space $X$ is $\integers/2\integers$.
\end{theorem}
\begin{proof}
Observe that, as this is a higher inductive type, it is freely generated by these constructors.
We want to know which paths exist from $X_0$ to itself.
If we had not provided the $X_2$ constructor, we would have the circle, and thus the fundamental group would be \integers, as we have already seen.
But the next constructor, $X_2$, is a path homotopy between $X_1$ and itself.
By adding another constructor, we can only further constrain the fundamental group, i.e., add new relationships.
In this case, we are stating that $X_1 = X_1^{-1}$.
This tells us that the group of loops over $X_0$ is freely generated by $X_1$ and the relationship $X_2$ of type $X_1 = X_1^{-1}$, or, in other words, $\langle X_1 \mid X_1 = X_1^{-1}\rangle$, which is isomorphic to $\integers/2\integers$, the cyclic group of order two.
\end{proof}

This clearly suits our conception of the fundamental group of the projective plane as seen in @sec:rp2_construction-classical.
What we called $\gamma$ in there, is represented by $X_1$ here.
And the fact that $\gamma \ct \gamma$ is the constant path, here can be seen as $X_1 \ct X_1 = \refl_{X_0}$, proven by $X_2$.

So, we pose the question: is $X$ equivalent to $\RP^n$?

Following the definition of equivalence, we should find two functions, $\psi : X \rightarrow \RP^2$, and $\varphi : \RP^2 \rightarrow X$, that are mutual quasi-inverses, or, in other words, such that $\psi \circ \varphi \sim \id_{\RP^2}$ and $\varphi \circ \psi \sim \id_{X}$.

We start by defining candidates for $\varphi$ and $\psi$.

As $\RP^1 = \sone$ [@buchholtz_real_2017, Example III.3], $\RP^2$ can be seen as the pushout of $\sone \leftarrow \sum_{x : \sone} \cov^1(x) \rightarrow \one$.

We can use the recursion principle of the pushout to build a function $\varphi$ into $X$.
The recursion principle states that, in order to define a function from the pushout, we must provide:

- For each $a : \sone$, the value of $\varphi(\inl(a)) : X$.

  We choose to embed \sone{} into $X$ by sending \sbase{} to $X_0$ and \sloop{} to $X_1$.

- For each $b : \one$, the value of $\varphi(\inr(b)) : X$.

  By the recursion principle of \one{}, it is enough to define the image of $\star$.
  We pick the base point $X_0$.

- For each $c : \sum_{(x : \sone)} \cov^1(x)$, the value of $\ap_\varphi(\glue(c)) : \varphi(\inl(f(c))) = \varphi(\inr(g(c)))$.

  For this pushout, $f$ is the projection onto the first component of the dependent pair, and $g$ is the only function into \one.
  So, what we are looking for is, for every pair $(x,y)$ of $\sum_{(x : \sone)} \cov^1(x)$, a way to apply $\varphi$ to a path of type $\inl(x) = X_0$, where $\inl(x)$ is the inclusion of $x$ into $X$.
  Notice how, for each $x : \sone$, there are two different pairs $(x,y)$ of type $\sum_{(x : \sone)} \cov^1(x)$, as $\cov^1$ is a double cover of $\sone$.

  So, we have to provide a continuous family of paths from each point on $X_1$ to $X_0$ that takes two turns around $X_1$.
  The path $X_1$ induces a family of paths from each point on itself to $X_0$.
  The problem is that, as we reach the end of the first turn, this path family does not seem to be continuous.
  The first time we visit $X_0$, we have $\refl_{X_0}$, and the second time we have $X_1$.

  But we remember that we have to take *two* laps because the path family must be continuous on both components of $\sum_{(x : \sone)} \cov^1(x)$, not just the first component \sone{}.
  Hence, we can take another turn.
  As we are ending the second loop, we are approaching $X_1 \ct X_1$.
  Now we actually need this to coincide with $\refl_{X_0}$ for the continuity to be preserved.
  And here we use the last ingredient of $X$, the homotopy $X_2$, from which we can deduce that $X_1 \ct X_1 = \refl_{X_0}$, which makes our construction correct.

For $\psi : X \rightarrow \RP^2$, it is slightly easier.
We apply its induction principle, so we have to provide a point $\psi(X_0)$ for $X_0$, a path $\psi(X_0) = \psi(X_0)$ for $X_1$, and a homotopy $\psi(X_1) = \psi(X_1)^{-1}$.

For $\psi(X_0)$ we choose $\inl(\sbase)$, and for $\psi(X_1)$, $\ap_{\inl}(\sloop)$.

TODO $\psi(X_2)$

Once we have both $\varphi$ and $\psi$, we must see they are mutual quasi-inverses.

For this, we once again use the eliminators of each type, but in a trickier way.
As the induction principle tells us that a function is determined by a series of parameters, we can prove that $\varphi \circ \psi$ and $\psi \circ \varphi$ are equal to the corresponding identity functions by just showing they agree with them on these parameters alone.

In the case of $\varphi \circ \psi : X \rightarrow X$, we use the elimination principle of $X$.
We can see the identity function of $X$ as that obtained by assigning $X_0$ to $X_0$, $X_1$ to $X_1$, and $X_2$ to $X_2$.
If we can show that $\varphi \circ \psi$ agrees with $\id_X$ on these values, then the composition has to be equal to the identity.

- $X_0$ is sent to $\inl(\sbase)$, which is then sent to $X_0$.
- $X_1$ is sent to $\ap_{\inl}(\sloop)$, which is sent to $X_1$.
- By definition of $\psi$, $X_2$ is taken to a proof of $\ap_{\inl}(\sloop) \ct \ap_{\inl}(\sloop) = \refl_{\inl(\sbase)}$.
By the way we have defined $\varphi$, we do not immediately see where this homotopy is taken to.
We need to make sure it corresponds to $X_2$.
