## Construction as a Higher Inductive Type

We begin by highlighting the fact that in homotopy type theory we use the word homotopy in two different senses.
The first, like the one that appears in the definition of a pushout, matches the classical notion of "a path between functions".
On the other hand, following the analogy between higher identity types and homotopy types, we can consider the terms of a type as points, their equalities as paths, and the equalities between those as homotopies.
To distinguish them, we will call the first kind *function homotopies* and the second kind *path homotopies*.

In the literature of homotopy type theory, cell complexes are mainly built using pushouts.
The function homotopy in the definition of the pushout plays the role of the higher cell.

In a few cases, the other notion of homotopy is used.
For example, the higher inductive type definitions of the higher spheres are built like this: we provide a $0$-cell and an $n$-cell, in the form of a higher path.

With this in mind, it was hypothesized that path homotopies could be used in other spaces.
In particular, the idea appeared when trying to see how to obtain the fundamental group of the real projective plane.
If one distills the (topological) idea of what a projective plane is, it can be seen as a $1$-cell, together with a $2$-cell that reverses it.
We can express this as a higher inductive type:
\begin{align*}
X_0 &: X\\
X_1 &: X_0 = X_0\\
X_2 &: X_1 = X_1^{-1}
\end{align*}

This construction is conceptually simpler than the one with pushouts.
But not only that: it also allows an easy construction of its fundamental group.

We recall that the fundamental group is defined as the $0$-truncation of the path space over the base point ($\norm{X_0 = X_0}_0$).

\begin{theorem}
The fundamental group of the space $X$ is $\integers/2\integers$.
\end{theorem}
\begin{proof}
Observe that, as this is a higher inductive type, it is freely generated by these constructors.
We want to know which paths exist from $X_0$ to itself.
If we had not provided the $X_2$ constructor, we would have the circle, and thus the fundamental group would be \integers, as we have already seen.
But the next constructor $X_2$ is a path homotopy between $X_1$ and itself.
By adding another constructor, we can only further constrain the fundamental group, i.e., add new relationships.
In this case, we are stating that $X_1 = X_1^{-1}$.
This tells us that the group of loops over $X_0$ is freely generated by $X_1$ and the relationship $X_2$ of type $X_1 = X_1^{-1}$, or, in other words, $\langle X_1 \mid X_1 = X_1^{-1}\rangle$, which is isomorphic to $\integers/2\integers$, the cyclic group of order two.
\end{proof}

This clearly suits our conception of the fundamental group of the projective plane as seen in @sec:rp2_construction-classical.
What we called $\gamma$ in there is represented by $X_1$ here.
And the fact that $\gamma \ct \gamma$ is the constant path can be seen here as $X_1 \ct X_1 = \refl_{X_0}$, proven by $X_2$.

So, we pose the question: is $X$ equivalent to $\RP^n$?

Following the definition of equivalence, we should find two functions, $\psi : X \rightarrow \RP^2$ and $\varphi : \RP^2 \rightarrow X$, that are mutual quasi-inverses, or, in other words, such that $\psi \circ \varphi \sim \id_{\RP^2}$ and $\varphi \circ \psi \sim \id_{X}$.

We start by defining a candidate for $\varphi$.
This in itself posed a considerable challenge, as it required having a very clear understanding of how $2$-paths work that might not be intuitive at first, in particular regarding induction.

As $\RP^1 = \sone$ [@buchholtz_real_2017, Example III.3], the type $\RP^2$ can be seen as the pushout of $\sone \leftarrow \sum_{x : \sone} \cov^1(x) \rightarrow \one$.

```\begin{definition}```{=latex}
We define $\varphi : \RP^2 \rightarrow X$ using the recursion principle of $\RP^2$.

- For each $a : \sone$, the value of $\varphi(\inl(a)) : X$.

  We choose to embed \sone{} into $X$ by sending \sbase{} to $X_0$ and \sloop{} to $X_1$.

- For each $b : \one$, the value of $\varphi(\inr(b)) : X$.

  By the recursion principle of \one{}, it is enough to define the image of $\star$.
  We pick the base point $X_0$.

- For each $c : \sum_{(x : \sone)} \cov^1(x)$, the value of $\ap_\varphi(\glue(c)) : \varphi(\inl(f(c))) = \varphi(\inr(g(c)))$.

  For this pushout, $f$ is the projection onto the first component of the dependent pair, and $g$ is the only function into \one.
  So, what we are looking for is, for every pair $(x,y)$ of $\sum_{(x : \sone)} \cov^1(x)$, a way to apply $\varphi$ to a path of type $\inl(x) = X_0$, where $\inl(x)$ is the inclusion of $x$ into $X$.
  Notice how, for each $x : \sone$, there are two different pairs $(x,y)$ of type $\sum_{(x : \sone)} \cov^1(x)$, as $\cov^1$ is a double cover of $\sone$.

  We use the induction principle for $\Sigma$ types, which essentially states that we have to provide a value for each possible pair.
  Then, we do induction on each component.
  This leaves us with four values to provide:

  - $\ap_s(\glue(\sbase,\north)) : X_0 = X_0$,
  - $\ap_s(\glue(\sbase,\south)) : X_0 = X_0$,
  - $\ap_s(\ap_{\glue}(\sloop,\north)) : \ap_s(\glue(\sbase,\north)) = \ap_s(\glue(\sbase,\south))$, and
  - $\ap_s(\ap_{\glue}(\sloop,\south)) : \ap_s(\glue(\sbase,\south)) = \ap_s(\glue(\sbase,\north))$.

  We choose $\ap_s(\glue(\sbase,\north)) := \refl_{X_0}$ and $\ap_s(\glue(\sbase,\north)) := X_1 \ct X_1$, so that the other two have types:

  - $\ap_s(\ap_{\glue}(\sloop,\north)) : \refl_{X_0} = X_1 \ct X_1$, and
  - $\ap_s(\ap_{\glue}(\sloop,\south)) : X_1 \ct X_1 = \refl_{X_0}$.

  We can then choose $X_2^{-1}$ and $X_2$ for those.

```\end{definition}```{=latex}

For $\psi : X \rightarrow \RP^2$, we try using the recursion principle.
We have to provide a point $\psi(X_0)$ for $X_0$, a path $\psi(X_0) = \psi(X_0)$ for $X_1$, and a homotopy $\psi(X_1) = \psi(X_1)^{-1}$.

- For $\psi(X_0)$ we choose $\inl(\sbase)$.
- For $\psi(X_1)$, $\ap_{\inl}(\sloop)$.

Unfortunately, the construction of $\psi(X_2)$ requires providing a proof that $\ap_\inl(\sloop) \ct \ap_\inl(\sloop) = \refl_{\inl(\sbase)}$, which practically amounts to calculating the fundamental group of $\RP^2$.

If we could define $\psi$ like this, then proving they are mutual quasi-inverses amounts to once again use the eliminators of each type, but in a trickier way.
As the induction principle tells us that a function is determined by a series of parameters, we can prove that $\varphi \circ \psi$ and $\psi \circ \varphi$ are equal to the corresponding identity functions by just showing they agree with them on these parameters alone.

In the case of $\varphi \circ \psi : X \rightarrow X$, we would use the elimination principle of $X$, whereas for $\psi \circ \varphi : \RP^2 \rightarrow \RP^2$, we would use the elimination principle of $\RP^2$.

The difficulties in defining the function $\psi$ are a clear display of the complexity of higher inductive types that require a second order eliminator (i.e. that have higher order paths), and explain the reason why these constructions are not thoroughly used.
Nonetheless, we believe that building them and proving them correct can be useful.
